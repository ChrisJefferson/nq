##############################################################################
##
##    Makefile                      NQ                         Werner Nickel
##
##    $Id$
##

all: nq

top_srcdir = @top_srcdir@
srcdir = @srcdir@
VPATH = @srcdir@

GAP_ROOT=@GAP_ROOT@
BINDIR=bin/@GAP_ARCH@
GMP_CFLAGS=@GMP_CFLAGS@
GMP_LIBS=@GMP_LIBS@

CC=@CC@
#OPTS = -g -pg $(COPTS)
OPTS = -O3 -Wuninitialized $(COPTS)
CFLAGS = $(OPTS) \
 -Wall \
 -Wpointer-arith\
 -Wcast-qual\
 -Wshadow\
 -Wwrite-strings\
 -W\
 -Wc++-compat\
 -ansi\
 -Wold-style-definition\
 -Wmissing-prototypes\
 -Wstrict-prototypes\
 -pedantic\
 -Wno-unused-parameter\
 -Wno-long-long
#  -Wno-conversion\
#  -Wno-missing-field-initializers\
#  -Wno-sign-compare \
# -Werror

OBJ = consistency.o pc.o relations.o word.o system.o time.o \
      addgen.o tails.o eliminate.o engel.o glimt.o instances.o \
      presentation.o mem.o pcarith.o collect.o combicol.o trmetab.o gap.o

nq : nq.o $(OBJ)
	$(CC) $(CFLAGS) $(CPPFLAGS) nq.o $(OBJ) $(LDFLAGS) $(GMP_LIBS) -o nq

glimt.o: glimt.c
	$(CC) $(CFLAGS) $(CPPFLAGS) $(GMP_CFLAGS) -c glimt.c
clean :
	rm -f *.o nq *~

distclean : clean
	rm -f config.h


# Some header dependencies, possibly incomplete / outdated.
# Generated using the GNU C -MMD command line option.
addgen.o: addgen.c config.h nq.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h
collect.o: collect.c config.h mem.h pc.h genexp.h pcarith.h macro.h \
  collect.h time.h
combicol.o: combicol.c config.h mem.h pc.h genexp.h pcarith.h macro.h \
  collect.h time.h
consistency.o: consistency.c nq.h config.h system.h mem.h genexp.h pc.h \
  pcarith.h collect.h macro.h
eliminate.o: eliminate.c nq.h config.h system.h mem.h genexp.h pc.h \
  pcarith.h collect.h macro.h
engel.o: engel.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h engel.h
gap.o: gap.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h
glimt.o: glimt.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h time.h
instances.o: instances.c presentation.h mem.h genexp.h nq.h config.h \
  system.h pc.h pcarith.h collect.h macro.h
mem.o: mem.c mem.h
nq.o: nq.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h collect.h \
  macro.h engel.h
pc.o: pc.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h collect.h \
  macro.h
pcarith.o: pcarith.c config.h presentation.h mem.h genexp.h pc.h \
  collect.h engel.h
presentation.o: presentation.c config.h presentation.h mem.h genexp.h
relations.o: relations.c presentation.h mem.h genexp.h nq.h config.h \
  system.h pc.h pcarith.h collect.h macro.h instances.h
system.o: system.c config.h nq.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h
tails.o: tails.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h
time.o: time.c config.h
trmetab.o: trmetab.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h engel.h
word.o: word.c nq.h config.h system.h mem.h genexp.h pc.h pcarith.h \
  collect.h macro.h
