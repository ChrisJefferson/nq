##############################################################################
##
##    Makefile.in                     NQ                         Werner Nickel
##
##    $Id$
##

##
##    Values imported from the configure script
##
BINDIR=bin/@target@-@BASECC@
GAP_ROOT=../..
GNU_MP_LIB=.
GNU_MP_INC=.

all: compile

gap: compile gapmanual

compile:
	(cd src; make GNU_MP_LIB=$(GNU_MP_LIB) GNU_MP_INC=$(GNU_MP_INC))
	@if test ! -d bin;  then mkdir bin; fi
	@if test ! -d $(BINDIR);  then mkdir $(BINDIR); fi
	mv src/nq $(BINDIR)

gapmanual:
	@if test ! -r $(GAP_ROOT)/sysinfo.gap; then \
	    echo "";							  \
	    echo "    Cannot locate the (main) GAP root directory.";      \
	    echo "    Determine the directory first and then run";        \
	    echo "    make again with the GAP root directory specified."; \
	    echo "";							  \
	    echo "    usage: make [ GAP_ROOT=<gap-root>]";		  \
	    echo "";							  \
	    exit 1;                                                       \
	else                                                              \
	    (cd doc; make GAP_ROOT=$(GAP_ROOT))                           \
	fi

clean:
	rm -f *~ */*~ config.cache config.log config.status
	(cd src; make clean)
	(cd doc; make clean)

spotless: clean
	rm -f Makefile
	rm -r bin
	(cd src; make spotless)
	(cd doc; make spotless)

